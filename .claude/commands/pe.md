---
description: Enhance prompts and wait for user confirmation before execution
argument-hint: <prompt_text>
exec: .claude/commands/scripts/enhance.py
interactive: true
---

# Prompt Enhancement Command - 提示词增强

**提示词增强** (PE) 是一个智能系统，用 AI 和项目上下文来优化您的提示词，使其更清晰、更具体、更容易执行。

## 🎯 使用方法

```bash
/pe 你的提示词文本
```

**例子：**
```bash
/pe 修复登录页面的身份验证 bug
/pe 添加用户配置文件导出功能并支持 CSV 和 JSON 格式
/pe 优化数据库查询性能，特别是处理大批量数据时
```

## 📋 工作流程

**您的提示词**
  ↓
**💭 AI 分析和增强** (收集项目上下文，结构化步骤，添加验收标准)
  ↓
**📝 显示原始 vs 增强版本**
  ↓
**🎯 显示快速选择菜单**
  ↓
**🤔 您主动选择下一步** (复制、修改、重新增强或拒绝)

---

## 🔄 完整流程

### 第 1 步：接收您的提示词
您输入：`/pe 您的提示词`

系统接收原始提示词并准备进行增强。

### 第 2 步：收集项目上下文
增强系统会自动：
- 📂 扫描项目结构（文件、目录、配置）
- 🛠️ 检测技术栈（框架、依赖库、编程语言）
- 📜 分析 git 历史（最近的提交、分支模式）
- 📋 读取配置文件（package.json, tsconfig.json 等）

### 第 3 步：AI 增强
DeepSeek AI 模型会：
- 分析您的提示词意图
- 理解项目的技术背景
- 生成结构化的增强版本，包括：
  - **详细的实现步骤** - 清晰的任务分解
  - **验收标准** - 明确的成功指标
  - **项目上下文** - 相关的代码位置和依赖
  - **最佳实践** - 针对您的技术栈的建议
  - **错误处理** - 潜在问题的应对方案

### 第 4 步：显示对比
系统显示清晰的对比：
```
📝 原始提示词：
[您输入的内容]

✨ 增强后的提示词：
[AI 增强的详细版本，包含步骤、标准、上下文]
```

### 第 5 步：快速选择菜单
系统显示 4 个选项，由您主动选择：

```
[1] ✅ 使用增强版本
    复制"增强后的提示词"，粘贴给我重新执行

[2] 📝 修改后使用
    修改"增强后的提示词"，然后粘贴给我重新执行

[3] 🔄 重新增强
    输入: /pe [修改后的提示词]

[4] ❌ 拒绝并重新组织
    丢弃结果，重新输入请求
```

**关键点**：我不会自动执行任何操作。您完全掌控决定权。

---

## ⚙️ 配置和设置

### 必需的环境变量

```bash
DEEPSEEK_API_KEY=sk-xxxxx   # 您的 DeepSeek API 密钥
```

### 设置方式

**方式 1：添加到 .env 文件**
```bash
cd ~/Prompt-Enhancement
echo "DEEPSEEK_API_KEY=sk-your-key-here" >> .env
```

**方式 2：设置环境变量**
```bash
export DEEPSEEK_API_KEY="sk-your-key-here"
```

获取免费 API 密钥：https://platform.deepseek.com

---

## 💡 最佳实践

1. **✍️ 写详细的提示词** - 提供更多上下文 = 更好的增强结果
   - ❌ 不好："修复 bug"
   - ✅ 很好："修复移动设备上的登录页面身份验证 bug，用户在 iOS Safari 中无法登录"

2. **📋 说明约束条件** - 性能、安全、兼容性要求
   - 例："优化查询性能，p99 延迟 < 100ms，需要向后兼容旧数据格式"

3. **🎯 明确目标** - 说明预期的结果或验证方式
   - 例："添加支持 CSV 和 JSON 导出，需要包含单元测试，应该能处理 100K+ 行数据"

4. **🔗 引用现有代码** - 如果适用，提到相关的文件或模块
   - 例："在 src/auth/login.ts 中添加 MFA 支持，与现有的 session 管理集成"

---

## ❓ 常见问题

**Q: 增强脚本超时了怎么办？**
A: 检查网络连接，验证 DeepSeek API 密钥有效，稍后重试。大约需要 30-60 秒。

**Q: 如果我对增强结果不满意？**
A: 您可以：
- 修改原始提示词，添加更多细节或约束
- 提供反馈给我，我可以手动调整增强结果
- 多试几次，逐步优化

**Q: 增强系统能访问我的私密代码吗？**
A: 只有项目的结构和配置信息被发送给 AI。实际的代码内容不会被上传。

**Q: 能否自定义增强模板？**
A: 可以！编辑 `enhanced_prompt_generator.py` 配置，或联系我进行定制。

---

## 🚀 立即开始

```bash
/pe 你想要增强的提示词
```

然后等待 30-60 秒，查看 AI 的增强结果！
