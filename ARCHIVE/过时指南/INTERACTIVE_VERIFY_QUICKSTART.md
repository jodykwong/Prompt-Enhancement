# 交互式验证脚本 - 快速开始

**脚本**: interactive_verify.py  
**功能**: 支持自定义提示词的交互式验证  
**状态**: ✅ **已测试并验证**

---

## 🚀 30 秒快速开始

### **第 1 步: 启动脚本**

```bash
cd /Users/jodykwong/Documents/augment-projects/Prompt-Enhancement
source venv/bin/activate
python3 interactive_verify.py
```

### **第 2 步: 选择显示选项**

```
是否显示模型的思考过程？(y/n，默认 y):
```

- 输入 `y` 或直接按 Enter: 显示完整思考过程
- 输入 `n`: 只显示增强结果

### **第 3 步: 输入提示词**

```
【测试 #1】请输入待增强的提示词
(输入 'quit' 退出, 'help' 查看帮助, 'history' 查看历史):
> 修复bug
```

### **第 4 步: 查看结果**

脚本将显示：
- 💭 模型的思考过程（可选）
- 📝 原始提示词
- ✨ 增强后的提示词
- 📊 统计信息（长度、扩展比例、处理时间）
- 🔍 上下文补充验证结果

---

## 📋 核心功能

| 功能 | 说明 | 状态 |
|-----|------|------|
| **交互式输入** | 支持自定义提示词 | ✅ |
| **多次连续测试** | 无需重启脚本 | ✅ |
| **思考过程展示** | 显示 DeepSeek 推理 | ✅ |
| **上下文补充验证** | 4 个维度验证 | ✅ |
| **统计信息** | 完整的性能指标 | ✅ |
| **输入历史记录** | 支持查看和清空 | ✅ |

---

## 🎮 常用命令

```bash
# 输入提示词进行增强
> 修复bug

# 查看帮助信息
> help

# 查看输入历史
> history

# 清空输入历史
> clear

# 退出程序
> quit
```

---

## 💡 使用示例

### **示例 1: 测试短提示词**

```
> 修复bug

⏳ 正在增强提示词，请稍候...

✨ 【增强后提示词】
修复bug：
1. 重现问题，查看错误日志
2. 定位代码缺陷，修复问题
3. 测试验证，确保无副作用

📊 【统计信息】
  • 原始长度: 5 字符
  • 增强后长度: 51 字符
  • 扩展比例: 10.20x
  • 处理时间: 21.91 秒

🔍 【上下文补充验证】
  ❌ 代码仓库结构: 未找到
  ❌ 技术栈信息: 未找到
  ❌ 文件路径: 未找到
  ❌ 依赖关系: 未找到

📈 上下文补充覆盖率: 0/4 类别
```

### **示例 2: 测试中等长度提示词**

```
> 添加用户注册功能

✨ 【增强后提示词】
在 src/auth/ 目录中添加用户注册功能：
1. 创建 register.js，实现注册逻辑
2. 集成 bcrypt 库进行密码加密
3. 添加数据验证，确保用户输入合法
4. 编写单元测试，覆盖率 > 80%

📊 【统计信息】
  • 原始长度: 8 字符
  • 增强后长度: 159 字符
  • 扩展比例: 19.88x
  • 处理时间: 24.12 秒

🔍 【上下文补充验证】
  ❌ 代码仓库结构: 未找到
  ✅ 技术栈信息: bcrypt
  ❌ 文件路径: 未找到
  ✅ 依赖关系: bcrypt

📈 上下文补充覆盖率: 2/4 类别
```

---

## 📊 测试结果

### **功能验证**

✅ 所有功能已验证通过：

```
✅ 交互式输入功能
✅ 增强功能
✅ 思考过程展示
✅ 上下文补充验证
✅ 统计信息显示
✅ 输入历史记录
```

### **测试覆盖**

| 测试用例 | 原始长度 | 增强后长度 | 扩展比例 | 上下文覆盖 | 状态 |
|---------|---------|-----------|---------|----------|------|
| 修复bug | 5 字符 | 51 字符 | 10.20x | 0/4 | ✅ |
| 添加用户注册功能 | 8 字符 | 159 字符 | 19.88x | 2/4 | ✅ |
| 重构代码 | 4 字符 | 99 字符 | 24.75x | 2/4 | ✅ |

---

## ⚙️ 配置

### **环境变量**

确保 `.env` 文件中有：

```
DEEPSEEK_API_KEY=your_api_key_here
```

### **虚拟环境**

```bash
# 激活虚拟环境
source venv/bin/activate

# 或者在 Windows 上
venv\Scripts\activate
```

---

## 🔧 故障排除

### **问题: API 密钥错误**

```
❌ 错误: DEEPSEEK_API_KEY not found
```

**解决**: 检查 `.env` 文件中是否有有效的 API 密钥

### **问题: 处理时间过长**

**说明**: 这是正常的，DeepSeek 推理模式需要 30-40 秒

### **问题: 网络连接错误**

**解决**: 检查网络连接和 API 密钥有效性

---

## 📚 相关文档

- **INTERACTIVE_VERIFY_GUIDE.md** - 详细使用指南
- **verify_improvements.py** - 自动化验证脚本
- **comprehensive_review_test.py** - 综合评审测试
- **quick_test.py** - 快速测试脚本

---

## 🎯 下一步

1. ✅ 启动脚本: `python3 interactive_verify.py`
2. ✅ 输入自定义提示词进行测试
3. ✅ 查看增强结果和上下文补充验证
4. ✅ 使用 `history` 命令查看历史记录
5. ✅ 输入 `quit` 退出程序

---

**版本**: v1.0  
**最后更新**: 2025-12-09  
**状态**: ✅ **已验证**

